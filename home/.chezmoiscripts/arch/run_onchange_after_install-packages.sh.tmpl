#!/bin/bash

{{ if eq .chezmoi.os "linux" -}}
{{ if eq .chezmoi.osRelease.id "arch" -}}

packages=(
    air-bin
    arp-scan
    autoconf
    base
    base-devel
    direnv
    autojump-rs
    automake
    aws-cli-v2-bin
    awslogs
    aws-session-manager-plugin
    bat
    bind
    bun-bin
    cloudflared
    consolas-font
    dmidecode
    dmraid
    docker
    docker-compose
    downgrade
    esbuild
    fuse-overlayfs
    fzf
    git
    github-cli
    gnu-netcat
    go
    goreleaser
    hyperfine
    inetutils
    iwd
    jq
    less
    libaio
    libldm
    make
    mysql-clients
    mono
    ncdu
    neofetch
    neovim
    ngrok
    nmap
    nodejs-lts-iron
    noto-fonts-emoji
    npm
    oh-my-zsh-git
    openssh
    paru-bin
    pkgconf
    plow
    pnpm
    postgresql
    prettierd
    pscale-cli-bin
    pspg
    pv
    python
    reflector
    ripgrep
    rsync
    speedtest-cli
    sshfs
    sshuttle
    sst-bin
    sudo
    syncthing
    sysbench
    tailscale
    terraform
    tmux
    tmux-plugin-manager
    traceroute
    typescript
    unison
    unrar
    unzip
    vercel
    wget
    xclip
    yt-dlp
    zip
    zsh
    btop
    cronie
    elixir
    gitwatch-git
    lazygit
    mitmproxy
    iperf3
    linux
    linux-firmware
    lsof
    mariadb-clients
    exfat-utils
    iw
    stow
    nfs-utils
    rustup
)

# Check if paru is installed
if ! command -v paru &> /dev/null; then
    echo "Installing paru..."
    git clone https://aur.archlinux.org/paru.git
    cd paru
    makepkg -si --noconfirm
    cd ..
    rm -rf paru
fi

# Install packages
echo "Installing packages..."
paru -Sy --needed --noconfirm "${packages[@]}"

echo "Package installation complete!"

{{ end -}}
{{ end -}}
